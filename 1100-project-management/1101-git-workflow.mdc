---
id: 1101
title: Git å·¥ä½œæµæœ€ä½³å®è·µ
description: Git åˆ†æ”¯ç­–ç•¥ã€æäº¤è§„èŒƒå’Œå›¢é˜Ÿåä½œçš„æœ€ä½³å®è·µ
globs: ["**/.git/**", "**/.gitignore", "**/.gitattributes"]
priority: medium
tags: [git, version-control, branching, commit-convention, workflow]
version: 1.0.0
author: Turbo AI Rules
lastUpdated: 2025-11-20
---

# Git å·¥ä½œæµæœ€ä½³å®è·µ

## é€‚ç”¨åœºæ™¯

- å›¢é˜Ÿåä½œå¼€å‘
- ç‰ˆæœ¬æ§åˆ¶ç®¡ç†
- åˆ†æ”¯ç­–ç•¥åˆ¶å®š
- ä»£ç å®¡æŸ¥æµç¨‹
- å‘å¸ƒç®¡ç†
- å¤šç¯å¢ƒéƒ¨ç½²

## æ ¸å¿ƒå†…å®¹

Git å·¥ä½œæµçš„æ ¸å¿ƒæœ€ä½³å®è·µï¼Œæ¶µç›–åˆ†æ”¯ç­–ç•¥ã€æäº¤è§„èŒƒã€ä»£ç å®¡æŸ¥ã€å†²çªè§£å†³ç­‰æ–¹é¢ã€‚

## å…³é”®åŸåˆ™

- âœ… é¢‘ç¹æäº¤ï¼Œå°æ­¥è¿­ä»£
- âœ… æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- âœ… åˆ†æ”¯å‘½åè§„èŒƒ
- âœ… ä»£ç å®¡æŸ¥å¿…é¡»
- âœ… ä¿æŒä¸»åˆ†æ”¯ç¨³å®š
- âœ… ä½¿ç”¨ Pull Request/Merge Request
- âœ… è‡ªåŠ¨åŒ–å·¥ä½œæµ

## åˆ†æ”¯ç­–ç•¥

### Git Flow

é€‚åˆå®šæœŸå‘å¸ƒçš„é¡¹ç›®ï¼š

```
main (production)
  â”œâ”€â”€ develop (development)
  â”‚   â”œâ”€â”€ feature/user-auth
  â”‚   â”œâ”€â”€ feature/payment-integration
  â”‚   â””â”€â”€ feature/dashboard
  â”œâ”€â”€ release/v1.2.0
  â””â”€â”€ hotfix/critical-bug

åˆ†æ”¯ç±»å‹ï¼š
- main: ç”Ÿäº§ç¯å¢ƒä»£ç 
- develop: å¼€å‘ç¯å¢ƒä»£ç 
- feature/*: æ–°åŠŸèƒ½å¼€å‘
- release/*: å‘å¸ƒå‡†å¤‡
- hotfix/*: ç´§æ€¥ä¿®å¤
```

**å·¥ä½œæµç¨‹ï¼š**

```bash
# 1. ä» develop åˆ›å»º feature åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/user-authentication

# 2. å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: implement user login"

# 3. æ¨é€åˆ°è¿œç¨‹
git push origin feature/user-authentication

# 4. åˆ›å»º Pull Request åˆ° develop

# 5. å‡†å¤‡å‘å¸ƒ
git checkout develop
git pull origin develop
git checkout -b release/v1.2.0

# 6. å‘å¸ƒååˆå¹¶åˆ° main å’Œ develop
git checkout main
git merge release/v1.2.0
git tag -a v1.2.0 -m "Release version 1.2.0"
git push origin main --tags

git checkout develop
git merge release/v1.2.0
git push origin develop

# 7. ç´§æ€¥ä¿®å¤
git checkout main
git checkout -b hotfix/critical-security-issue
# ... ä¿®å¤ä»£ç  ...
git commit -m "fix: patch security vulnerability"

# åˆå¹¶åˆ° main å’Œ develop
git checkout main
git merge hotfix/critical-security-issue
git tag -a v1.2.1 -m "Hotfix v1.2.1"
git push origin main --tags

git checkout develop
git merge hotfix/critical-security-issue
git push origin develop
```

### GitHub Flow

é€‚åˆæŒç»­éƒ¨ç½²çš„é¡¹ç›®ï¼ˆæ›´ç®€å•ï¼‰ï¼š

```
main
  â”œâ”€â”€ feature/add-user-profile
  â”œâ”€â”€ feature/improve-search
  â””â”€â”€ fix/login-error

æµç¨‹ï¼š
1. ä» main åˆ›å»ºåˆ†æ”¯
2. æ·»åŠ æäº¤
3. åˆ›å»º Pull Request
4. ä»£ç å®¡æŸ¥å’Œè®¨è®º
5. éƒ¨ç½²æµ‹è¯•
6. åˆå¹¶åˆ° main
7. ç«‹å³éƒ¨ç½²
```

**å·¥ä½œæµç¨‹ï¼š**

```bash
# 1. åˆ›å»ºåˆ†æ”¯
git checkout main
git pull origin main
git checkout -b feature/add-user-profile

# 2. å¼€å‘å’Œæäº¤
git add .
git commit -m "feat: add user profile page"
git push origin feature/add-user-profile

# 3. åˆ›å»º Pull Request

# 4. å®¡æŸ¥é€šè¿‡ååˆå¹¶
git checkout main
git pull origin main
# (é€šè¿‡ GitHub UI åˆå¹¶æˆ–å‘½ä»¤è¡Œ)
git merge feature/add-user-profile
git push origin main

# 5. åˆ é™¤å·²åˆå¹¶çš„åˆ†æ”¯
git branch -d feature/add-user-profile
git push origin --delete feature/add-user-profile
```

### Trunk-Based Development

é€‚åˆé«˜é¢‘éƒ¨ç½²çš„å›¢é˜Ÿï¼š

```
main (trunk)
  â”œâ”€â”€ (çŸ­æœŸ) feature-flags
  â””â”€â”€ (æå°‘) release-branches

ç‰¹ç‚¹ï¼š
- ç›´æ¥åœ¨ main åˆ†æ”¯å¼€å‘
- ä½¿ç”¨ feature flags æ§åˆ¶åŠŸèƒ½
- æ¯å¤©è‡³å°‘ä¸€æ¬¡åˆå¹¶
- æçŸ­ç”Ÿå‘½å‘¨æœŸçš„åˆ†æ”¯ï¼ˆå°äº1å¤©ï¼‰
```

## åˆ†æ”¯å‘½åè§„èŒƒ

```
ç±»å‹/èŒƒå›´-ç®€çŸ­æè¿°

ç±»å‹ï¼š
- feature/  : æ–°åŠŸèƒ½
- bugfix/   : Bug ä¿®å¤
- hotfix/   : ç´§æ€¥ä¿®å¤
- release/  : å‘å¸ƒåˆ†æ”¯
- refactor/ : é‡æ„
- docs/     : æ–‡æ¡£æ›´æ–°
- test/     : æµ‹è¯•ç›¸å…³
- chore/    : æ‚é¡¹ä»»åŠ¡

ç¤ºä¾‹ï¼š
âœ… feature/user-authentication
âœ… bugfix/login-validation
âœ… hotfix/payment-gateway-error
âœ… release/v2.0.0
âœ… refactor/database-queries
âœ… docs/api-documentation
âœ… test/integration-tests

âŒ new-feature
âŒ fix
âŒ update
âŒ my-branch
```

## æäº¤è§„èŒƒï¼ˆConventional Commitsï¼‰

```
<type>(<scope>): <subject>

<body>

<footer>

ç±»å‹ï¼ˆtypeï¼‰ï¼š
- feat: æ–°åŠŸèƒ½
- fix: Bug ä¿®å¤
- docs: æ–‡æ¡£æ›´æ–°
- style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- refactor: é‡æ„
- perf: æ€§èƒ½ä¼˜åŒ–
- test: æµ‹è¯•ç›¸å…³
- build: æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–
- ci: CI é…ç½®
- chore: å…¶ä»–ä¿®æ”¹
- revert: å›æ»šæäº¤

èŒƒå›´ï¼ˆscopeï¼‰ï¼šå¯é€‰ï¼Œè¡¨ç¤ºå½±å“çš„æ¨¡å—
ä¸»é¢˜ï¼ˆsubjectï¼‰ï¼šç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 å­—ç¬¦
æ­£æ–‡ï¼ˆbodyï¼‰ï¼šå¯é€‰ï¼Œè¯¦ç»†æè¿°
é¡µè„šï¼ˆfooterï¼‰ï¼šå¯é€‰ï¼ŒBreaking Changes æˆ–å…³é—­ Issue
```

**æäº¤ç¤ºä¾‹ï¼š**

```bash
# ç®€å•æäº¤
git commit -m "feat: add user login functionality"
git commit -m "fix: resolve null pointer exception in payment"
git commit -m "docs: update API documentation"

# å¸¦èŒƒå›´çš„æäº¤
git commit -m "feat(auth): implement JWT authentication"
git commit -m "fix(ui): correct button alignment on mobile"

# å®Œæ•´æäº¤ï¼ˆå¤šè¡Œï¼‰
git commit -m "feat(auth): implement social login

Add support for Google and GitHub OAuth login.
Users can now sign in using their social accounts.

Closes #123"

# Breaking Change
git commit -m "feat(api): change user endpoint structure

BREAKING CHANGE: User API endpoint changed from /api/user to /api/v2/users.
Update all client applications to use the new endpoint."

# å›æ»šæäº¤
git commit -m "revert: feat(auth): implement JWT authentication

This reverts commit abc123def456.
Reason: Performance issues in production."
```

**Commitlint é…ç½®ï¼š**

```javascript
// commitlint.config.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'docs',
        'style',
        'refactor',
        'perf',
        'test',
        'build',
        'ci',
        'chore',
        'revert'
      ]
    ],
    'subject-case': [2, 'never', ['upper-case']],
    'subject-max-length': [2, 'always', 72],
    'body-max-line-length': [2, 'always', 100]
  }
};

// package.json
{
  "husky": {
    "hooks": {
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  }
}
```

## Pull Request æœ€ä½³å®è·µ

**PR æ ‡é¢˜ï¼š**

```
éµå¾ª Conventional Commits è§„èŒƒ

âœ… feat: add user profile page
âœ… fix: resolve login redirect issue
âœ… refactor: optimize database queries

âŒ Update code
âŒ Fix bug
âŒ WIP
```

**PR æè¿°æ¨¡æ¿ï¼š**

```markdown
## å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½
- [ ] Bug ä¿®å¤
- [ ] é‡æ„
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] å…¶ä»–

## å˜æ›´æè¿°

ç®€è¦æè¿°æœ¬æ¬¡ PR çš„å†…å®¹å’Œç›®çš„ã€‚

## ç›¸å…³ Issue

Closes #123
Relates to #456

## æµ‹è¯•

æè¿°å¦‚ä½•æµ‹è¯•è¿™äº›å˜æ›´ï¼š

- [ ] å•å…ƒæµ‹è¯•å·²é€šè¿‡
- [ ] é›†æˆæµ‹è¯•å·²é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•å·²å®Œæˆ

## æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰

æ·»åŠ ç›¸å…³æˆªå›¾æˆ– GIF

## æ£€æŸ¥æ¸…å•

- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²æ·»åŠ å¿…è¦çš„æµ‹è¯•
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ— æ–°çš„è­¦å‘Š
- [ ] å·²è‡ªæµ‹æ‰€æœ‰åŠŸèƒ½

## æ³¨æ„äº‹é¡¹

åˆ—å‡ºéœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹æˆ–æ½œåœ¨å½±å“ã€‚
```

**.github/pull_request_template.mdï¼š**

```markdown
## ğŸ“ å˜æ›´æè¿°

## ğŸ”— ç›¸å…³ Issue

## ğŸ§ª æµ‹è¯•è®¡åˆ’

- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ‰‹åŠ¨æµ‹è¯•

## ğŸ“¸ æˆªå›¾

## âœ… æ£€æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆè§„èŒƒ
- [ ] æµ‹è¯•å·²é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ—  Breaking Changesï¼ˆæˆ–å·²åœ¨æè¿°ä¸­è¯´æ˜ï¼‰

## ğŸ’¡ å…¶ä»–ä¿¡æ¯
```

## ä»£ç å®¡æŸ¥è§„èŒƒ

**å®¡æŸ¥è€…æ£€æŸ¥é¡¹ï¼š**

```
åŠŸèƒ½æ€§ï¼š
âœ… ä»£ç æ˜¯å¦å®ç°äº†é¢„æœŸåŠŸèƒ½
âœ… è¾¹ç•Œæ¡ä»¶æ˜¯å¦å¤„ç†
âœ… é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„

ä»£ç è´¨é‡ï¼š
âœ… ä»£ç æ˜¯å¦æ˜“è¯»æ˜“ç»´æŠ¤
âœ… å‘½åæ˜¯å¦æ¸…æ™°
âœ… æ˜¯å¦æœ‰é‡å¤ä»£ç 
âœ… æ˜¯å¦éµå¾ªé¡¹ç›®è§„èŒƒ

å®‰å…¨æ€§ï¼š
âœ… æ˜¯å¦æœ‰å®‰å…¨æ¼æ´
âœ… è¾“å…¥éªŒè¯æ˜¯å¦å……åˆ†
âœ… æ•æ„Ÿä¿¡æ¯æ˜¯å¦æ³„éœ²

æ€§èƒ½ï¼š
âœ… æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜
âœ… æ•°æ®åº“æŸ¥è¯¢æ˜¯å¦ä¼˜åŒ–
âœ… æ˜¯å¦æœ‰å†…å­˜æ³„æ¼

æµ‹è¯•ï¼š
âœ… æµ‹è¯•è¦†ç›–ç‡æ˜¯å¦è¶³å¤Ÿ
âœ… æµ‹è¯•æ˜¯å¦æœ‰æ„ä¹‰
âœ… è¾¹ç¼˜æƒ…å†µæ˜¯å¦æµ‹è¯•
```

**å®¡æŸ¥è¯„è®ºç¤ºä¾‹ï¼š**

````markdown
âœ… å»ºè®¾æ€§åé¦ˆï¼š
"è¿™é‡Œå¯ä»¥ä½¿ç”¨ Array.map() ç®€åŒ–ä»£ç ï¼š

```javascript
const names = users.map((user) => user.name);
```
````

"

"å»ºè®®æ·»åŠ é”™è¯¯å¤„ç†ï¼Œé˜²æ­¢ API è°ƒç”¨å¤±è´¥æ—¶åº”ç”¨å´©æºƒã€‚"

"è¿™ä¸ªå‡½æ•°é€»è¾‘è¾ƒå¤æ‚ï¼Œå»ºè®®æ‹†åˆ†ä¸ºæ›´å°çš„å‡½æ•°å¹¶æ·»åŠ æ³¨é‡Šã€‚"

âŒ é¿å…ï¼š
"ä»£ç å¾ˆçƒ‚"
"é‡å†™è¿™éƒ¨åˆ†"
"è¿™ä¸å¯¹"

````

## Git Hooks

**Husky + lint-staged é…ç½®ï¼š**
```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS",
      "pre-push": "npm test"
    }
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,yml}": [
      "prettier --write"
    ]
  }
}
````

**è‡ªå®šä¹‰ Git Hooksï¼š**

```bash
# .git/hooks/pre-commit
#!/bin/sh

# æ£€æŸ¥æ˜¯å¦æœ‰å¤§æ–‡ä»¶
files=$(git diff --cached --name-only)
for file in $files; do
  size=$(du -k "$file" | cut -f1)
  if [ $size -gt 5000 ]; then
    echo "Error: File $file is larger than 5MB"
    exit 1
  fi
done

# è¿è¡Œæµ‹è¯•
npm test
if [ $? -ne 0 ]; then
  echo "Tests failed. Commit aborted."
  exit 1
fi

exit 0
```

## .gitignore æœ€ä½³å®è·µ

```gitignore
# ä¾èµ–
node_modules/
vendor/
.pnp
.pnp.js

# æ„å»ºè¾“å‡º
dist/
build/
out/
.next/
.nuxt/
.output/

# ç¯å¢ƒå˜é‡
.env
.env.local
.env.*.local

# æ—¥å¿—
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# ç¼–è¾‘å™¨
.vscode/
.idea/
*.swp
*.swo
*~
.DS_Store

# æµ‹è¯•è¦†ç›–ç‡
coverage/
.nyc_output/

# ç¼“å­˜
.cache/
.parcel-cache/
.eslintcache

# ä¸´æ—¶æ–‡ä»¶
tmp/
temp/
*.tmp

# OS
Thumbs.db
.DS_Store
```

## å¸¸è§åœºæ™¯

**åˆå¹¶å†²çªè§£å†³ï¼š**

```bash
# 1. æ›´æ–°æœ¬åœ°åˆ†æ”¯
git checkout feature/my-feature
git fetch origin
git merge origin/main

# 2. è§£å†³å†²çª
# ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œé€‰æ‹©ä¿ç•™çš„å†…å®¹

# 3. æ ‡è®°ä¸ºå·²è§£å†³
git add <conflicted-files>
git commit -m "merge: resolve conflicts with main"

# 4. æ¨é€
git push origin feature/my-feature
```

**ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ï¼š**

```bash
# ä¿®æ”¹æäº¤ä¿¡æ¯
git commit --amend -m "feat: correct commit message"

# æ·»åŠ é—æ¼çš„æ–‡ä»¶
git add forgotten-file.js
git commit --amend --no-edit

# âš ï¸ æ³¨æ„ï¼šåªåœ¨æœªæ¨é€æ—¶ä½¿ç”¨
# å¦‚æœå·²æ¨é€ï¼Œéœ€è¦å¼ºåˆ¶æ¨é€ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
git push --force-with-lease
```

**æ’¤é”€æäº¤ï¼š**

```bash
# è½¯æ’¤é”€ï¼ˆä¿ç•™æ›´æ”¹ï¼‰
git reset --soft HEAD~1

# ç¡¬æ’¤é”€ï¼ˆä¸¢å¼ƒæ›´æ”¹ï¼‰
git reset --hard HEAD~1

# å®‰å…¨æ’¤é”€ï¼ˆåˆ›å»ºæ–°æäº¤ï¼‰
git revert HEAD
```

**æ¸…ç†åˆ†æ”¯ï¼š**

```bash
# æŸ¥çœ‹å·²åˆå¹¶çš„åˆ†æ”¯
git branch --merged main

# åˆ é™¤æœ¬åœ°åˆ†æ”¯
git branch -d feature/old-feature

# åˆ é™¤è¿œç¨‹åˆ†æ”¯
git push origin --delete feature/old-feature

# æ¸…ç†è¿œç¨‹å·²åˆ é™¤çš„åˆ†æ”¯å¼•ç”¨
git fetch --prune
```

## å·¥å…·é…ç½®

**æ¨èå·¥å…·ï¼š**

```json
{
  "devDependencies": {
    "husky": "^8.0.0",
    "lint-staged": "^13.0.0",
    "@commitlint/cli": "^17.0.0",
    "@commitlint/config-conventional": "^17.0.0",
    "commitizen": "^4.3.0",
    "cz-conventional-changelog": "^3.3.0"
  },
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  }
}
```

## å¸¸è§é—®é¢˜

**Q: ä½•æ—¶ä½¿ç”¨ rebase vs mergeï¼Ÿ**
A: Feature åˆ†æ”¯ä½¿ç”¨ rebase ä¿æŒçº¿æ€§å†å²ï¼Œåˆå¹¶åˆ°ä¸»åˆ†æ”¯ä½¿ç”¨ merge ä¿ç•™å®Œæ•´å†å²ã€‚

**Q: å¦‚ä½•å¤„ç†å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶ï¼Ÿ**
A: ä½¿ç”¨ Git LFS (Large File Storage)ã€‚

## æ‰©å±•é˜…è¯»

- [Git Flow](https://nvie.com/posts/a-successful-git-branching-model/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Trunk Based Development](https://trunkbaseddevelopment.com/)
