---
id: 1201
title: API æ–‡æ¡£æœ€ä½³å®è·µ
description: API æ–‡æ¡£ç¼–å†™ã€ç»´æŠ¤å’Œå‘å¸ƒçš„æœ€ä½³å®è·µ
globs: ["**/docs/**/*.md", "**/README.md", "**/*.openapi.yml", "**/swagger.json"]
priority: medium
tags: [documentation, api-docs, openapi, swagger, markdown, readme]
version: 1.0.0
author: Turbo AI Rules
lastUpdated: 2025-11-20
---

# API æ–‡æ¡£æœ€ä½³å®è·µ

## é€‚ç”¨åœºæ™¯

- API æ–‡æ¡£ç¼–å†™
- OpenAPI/Swagger è§„èŒƒ
- README æ–‡æ¡£
- æŠ€æœ¯æ–‡æ¡£ç»´æŠ¤
- å¼€å‘è€…æ–‡æ¡£
- ç”¨æˆ·æ‰‹å†Œ

## æ ¸å¿ƒå†…å®¹

API æ–‡æ¡£çš„æ ¸å¿ƒæœ€ä½³å®è·µï¼Œæ¶µç›– OpenAPI è§„èŒƒã€æ–‡æ¡£ç»“æ„ã€ç¤ºä¾‹ä»£ç ã€ç‰ˆæœ¬ç®¡ç†ç­‰æ–¹é¢ã€‚

## å…³é”®åŸåˆ™

- âœ… æ–‡æ¡£å³ä»£ç 
- âœ… ä¿æŒæ–‡æ¡£æ›´æ–°
- âœ… æä¾›å®Œæ•´ç¤ºä¾‹
- âœ… æ¸…æ™°çš„é”™è¯¯è¯´æ˜
- âœ… äº¤äº’å¼æ–‡æ¡£
- âœ… ç‰ˆæœ¬åŒ–æ–‡æ¡£
- âœ… æ˜“äºæœç´¢å’Œå¯¼èˆª

## OpenAPI è§„èŒƒ

**OpenAPI 3.0 ç¤ºä¾‹ï¼š**

```yaml
openapi: 3.0.0
info:
  title: User Management API
  description: API for managing users in the system
  version: 1.0.0
  contact:
    name: API Support
    email: api@example.com
    url: https://example.com/support
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.example.com/v1
    description: Production server
  - url: https://staging-api.example.com/v1
    description: Staging server
  - url: http://localhost:3000/v1
    description: Development server

tags:
  - name: Users
    description: User management operations
  - name: Authentication
    description: Authentication endpoints

paths:
  /users:
    get:
      summary: List all users
      description: Retrieve a paginated list of users
      operationId: listUsers
      tags:
        - Users
      parameters:
        - name: page
          in: query
          description: Page number
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: Number of items per page
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: sort
          in: query
          description: Sort field and order
          required: false
          schema:
            type: string
            enum: [name_asc, name_desc, created_asc, created_desc]
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
                  pagination:
                    $ref: "#/components/schemas/Pagination"
              examples:
                success:
                  value:
                    data:
                      - id: "1"
                        name: "John Doe"
                        email: "john@example.com"
                        role: "admin"
                        createdAt: "2024-01-01T00:00:00Z"
                      - id: "2"
                        name: "Jane Smith"
                        email: "jane@example.com"
                        role: "user"
                        createdAt: "2024-01-02T00:00:00Z"
                    pagination:
                      page: 1
                      limit: 20
                      total: 100
                      totalPages: 5
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"
      security:
        - bearerAuth: []

    post:
      summary: Create a new user
      description: Create a new user in the system
      operationId: createUser
      tags:
        - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
            examples:
              admin:
                summary: Create admin user
                value:
                  name: "Admin User"
                  email: "admin@example.com"
                  password: "SecurePass123!"
                  role: "admin"
              user:
                summary: Create regular user
                value:
                  name: "Regular User"
                  email: "user@example.com"
                  password: "UserPass123!"
                  role: "user"
      responses:
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequest"
        "409":
          description: User already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              example:
                error:
                  code: "USER_EXISTS"
                  message: "User with this email already exists"
      security:
        - bearerAuth: []

  /users/{userId}:
    get:
      summary: Get user by ID
      description: Retrieve detailed information about a specific user
      operationId: getUserById
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          description: User ID
          schema:
            type: string
      responses:
        "200":
          description: Successful response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "404":
          $ref: "#/components/responses/NotFound"
      security:
        - bearerAuth: []

    put:
      summary: Update user
      description: Update user information
      operationId: updateUser
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
      responses:
        "200":
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequest"
        "404":
          $ref: "#/components/responses/NotFound"
      security:
        - bearerAuth: []

    delete:
      summary: Delete user
      description: Delete a user from the system
      operationId: deleteUser
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: User deleted successfully
        "404":
          $ref: "#/components/responses/NotFound"
      security:
        - bearerAuth: []

  /auth/login:
    post:
      summary: User login
      description: Authenticate user and receive access token
      operationId: login
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
            example:
              email: "user@example.com"
              password: "SecurePass123!"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                  refreshToken:
                    type: string
                  expiresIn:
                    type: integer
                    description: Token expiration time in seconds
              example:
                accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                refreshToken: "dGhpcyBpcyBhIHJlZnJlc2ggdG9rZW4..."
                expiresIn: 3600
        "401":
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:
  schemas:
    User:
      type: object
      required:
        - id
        - name
        - email
        - role
      properties:
        id:
          type: string
          description: Unique user identifier
        name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        role:
          type: string
          enum: [admin, user, guest]
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateUserRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
        role:
          type: string
          enum: [admin, user, guest]
          default: user

    UpdateUserRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        role:
          type: string
          enum: [admin, user, guest]

    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer

    Error:
      type: object
      required:
        - error
      properties:
        error:
          type: object
          required:
            - code
            - message
          properties:
            code:
              type: string
            message:
              type: string
            details:
              type: object

  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error:
              code: "VALIDATION_ERROR"
              message: "Invalid input data"
              details:
                field: "email"
                issue: "Invalid email format"

    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error:
              code: "UNAUTHORIZED"
              message: "Authentication required"

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error:
              code: "NOT_FOUND"
              message: "Resource not found"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
          example:
            error:
              code: "INTERNAL_ERROR"
              message: "An unexpected error occurred"

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT authentication token
```

## README æ–‡æ¡£ç»“æ„

**å®Œæ•´çš„ README æ¨¡æ¿ï¼š**

````markdown
# é¡¹ç›®åç§°

[![CI](https://github.com/username/repo/workflows/CI/badge.svg)](https://github.com/username/repo/actions)
[![Coverage](https://codecov.io/gh/username/repo/branch/main/graph/badge.svg)](https://codecov.io/gh/username/repo)
[![npm version](https://badge.fury.io/js/package-name.svg)](https://www.npmjs.com/package/package-name)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

> ä¸€å¥è¯æè¿°é¡¹ç›®ç”¨é€”å’Œæ ¸å¿ƒä»·å€¼

## âœ¨ ç‰¹æ€§

- ğŸš€ å¿«é€Ÿé«˜æ•ˆ
- ğŸ“¦ å¼€ç®±å³ç”¨
- ğŸ¨ ä¼˜é›…çš„ API è®¾è®¡
- ğŸ”’ ç±»å‹å®‰å…¨
- ğŸ“š å®Œæ•´çš„æ–‡æ¡£
- âš¡ é›¶ä¾èµ–

## ğŸ“‹ ç›®å½•

- [å®‰è£…](#å®‰è£…)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [ç¤ºä¾‹](#ç¤ºä¾‹)
- [é…ç½®](#é…ç½®)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸ“¦ å®‰è£…

```bash
# npm
npm install package-name

# yarn
yarn add package-name

# pnpm
pnpm add package-name
```
````

## ğŸš€ å¿«é€Ÿå¼€å§‹

```javascript
import { createApp } from "package-name";

const app = createApp({
  port: 3000,
  apiKey: "your-api-key",
});

app.start();
```

## ğŸ’¡ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç”¨æ³•

```javascript
// ç¤ºä¾‹ä»£ç 
```

### é«˜çº§ç”¨æ³•

```javascript
// é«˜çº§ç¤ºä¾‹
```

## ğŸ“– API æ–‡æ¡£

### `createApp(options)`

åˆ›å»ºåº”ç”¨å®ä¾‹ã€‚

**å‚æ•°ï¼š**

| åç§°   | ç±»å‹   | å¿…å¡« | é»˜è®¤å€¼ | æè¿°     |
| ------ | ------ | ---- | ------ | -------- |
| port   | number | å¦   | 3000   | æœåŠ¡ç«¯å£ |
| apiKey | string | æ˜¯   | -      | API å¯†é’¥ |

**è¿”å›å€¼ï¼š**

è¿”å› `App` å®ä¾‹ã€‚

**ç¤ºä¾‹ï¼š**

```javascript
const app = createApp({ port: 8080 });
```

## ğŸ¯ ç¤ºä¾‹

æŸ¥çœ‹ [examples](./examples) ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ã€‚

## âš™ï¸ é…ç½®

```javascript
{
  "port": 3000,
  "host": "localhost",
  "database": {
    "url": "postgresql://localhost/mydb"
  }
}
```

## ğŸ› ï¸ å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev

# è¿è¡Œæµ‹è¯•
npm test

# æ„å»º
npm run build
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## ğŸ“„ è®¸å¯è¯

[MIT](LICENSE) Â© 2024 Your Name

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„æ”¯æŒï¼

## ğŸ“ è”ç³»æ–¹å¼

- ä½œè€…ï¼šYour Name
- Emailï¼šyour@email.com
- GitHubï¼š[@username](https://github.com/username)

````

## ä»£ç ç¤ºä¾‹æœ€ä½³å®è·µ

**æä¾›å¤šè¯­è¨€ç¤ºä¾‹ï¼š**
```markdown
### cURL

```bash
curl -X POST https://api.example.com/v1/users \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com"
  }'
````

### JavaScript (fetch)

```javascript
const response = await fetch("https://api.example.com/v1/users", {
  method: "POST",
  headers: {
    Authorization: "Bearer YOUR_TOKEN",
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    name: "John Doe",
    email: "john@example.com",
  }),
});

const data = await response.json();
console.log(data);
```

### Python (requests)

```python
import requests

url = 'https://api.example.com/v1/users'
headers = {
    'Authorization': 'Bearer YOUR_TOKEN',
    'Content-Type': 'application/json'
}
data = {
    'name': 'John Doe',
    'email': 'john@example.com'
}

response = requests.post(url, headers=headers, json=data)
print(response.json())
```

### Node.js (axios)

```javascript
const axios = require("axios");

const response = await axios.post(
  "https://api.example.com/v1/users",
  {
    name: "John Doe",
    email: "john@example.com",
  },
  {
    headers: {
      Authorization: "Bearer YOUR_TOKEN",
    },
  }
);

console.log(response.data);
```

````

## é”™è¯¯æ–‡æ¡£

**è¯¦ç»†çš„é”™è¯¯è¯´æ˜ï¼š**
```markdown
## é”™è¯¯ç 

| é”™è¯¯ç  | HTTP çŠ¶æ€ | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|-----------|------|----------|
| AUTH_REQUIRED | 401 | ç¼ºå°‘è®¤è¯ä»¤ç‰Œ | åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Authorization |
| INVALID_TOKEN | 401 | ä»¤ç‰Œæ— æ•ˆæˆ–è¿‡æœŸ | é‡æ–°è·å–ä»¤ç‰Œ |
| PERMISSION_DENIED | 403 | æƒé™ä¸è¶³ | ä½¿ç”¨å…·æœ‰é€‚å½“æƒé™çš„è´¦æˆ· |
| NOT_FOUND | 404 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥èµ„æº ID æ˜¯å¦æ­£ç¡® |
| VALIDATION_ERROR | 400 | è¾“å…¥éªŒè¯å¤±è´¥ | æŸ¥çœ‹ details å­—æ®µäº†è§£å…·ä½“é”™è¯¯ |
| RATE_LIMIT_EXCEEDED | 429 | è¯·æ±‚é¢‘ç‡è¶…é™ | é™ä½è¯·æ±‚é¢‘ç‡æˆ–å‡çº§å¥—é¤ |
| INTERNAL_ERROR | 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input data",
    "details": {
      "field": "email",
      "issue": "Invalid email format",
      "value": "invalid-email"
    },
    "timestamp": "2024-01-01T12:00:00Z",
    "requestId": "req_abc123"
  }
}
````

### é”™è¯¯å¤„ç†ç¤ºä¾‹

```javascript
try {
  const response = await api.createUser(userData);
} catch (error) {
  switch (error.code) {
    case "VALIDATION_ERROR":
      console.error("Invalid data:", error.details);
      break;
    case "USER_EXISTS":
      console.error("User already exists");
      break;
    default:
      console.error("Unexpected error:", error);
  }
}
```

````

## æ–‡æ¡£ç”Ÿæˆå·¥å…·

**ä½¿ç”¨ Redoc ç”Ÿæˆæ–‡æ¡£ï¼š**
```html
<!DOCTYPE html>
<html>
<head>
  <title>API Documentation</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <redoc spec-url='./openapi.yml'></redoc>
  <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
</body>
</html>
````

**ä½¿ç”¨ Swagger UIï¼š**

```yaml
# docker-compose.yml
version: "3"
services:
  swagger-ui:
    image: swaggerapi/swagger-ui
    ports:
      - "8080:8080"
    environment:
      SWAGGER_JSON: /openapi/openapi.yml
    volumes:
      - ./docs:/openapi
```

**ä½¿ç”¨ Docusaurusï¼š**

```bash
# åˆå§‹åŒ–
npx create-docusaurus@latest my-docs classic

# ç›®å½•ç»“æ„
docs/
â”œâ”€â”€ intro.md
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ authentication.md
â”‚   â”œâ”€â”€ users.md
â”‚   â””â”€â”€ products.md
â”œâ”€â”€ guides/
â”‚   â”œâ”€â”€ getting-started.md
â”‚   â””â”€â”€ best-practices.md
â””â”€â”€ reference/
    â””â”€â”€ error-codes.md
```

## ç‰ˆæœ¬åŒ–æ–‡æ¡£

**è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š**

```
/docs/v1/  - ç‰ˆæœ¬ 1
/docs/v2/  - ç‰ˆæœ¬ 2
/docs/latest/  - æœ€æ–°ç‰ˆæœ¬ï¼ˆé“¾æ¥åˆ°å½“å‰ç¨³å®šç‰ˆï¼‰

å¼ƒç”¨é€šçŸ¥ï¼š
v1 API å°†äº 2025-12-31 åœæ­¢æ”¯æŒã€‚
è¯·è¿ç§»åˆ° v2ã€‚
```

**è¿ç§»æŒ‡å—ï¼š**

```markdown
# ä» v1 è¿ç§»åˆ° v2

## é‡å¤§å˜æ›´

### 1. ç«¯ç‚¹è·¯å¾„å˜æ›´

**v1:**
```

GET /api/user/{id}

```

**v2:**
```

GET /api/v2/users/{id}

````

### 2. å“åº”æ ¼å¼å˜æ›´

**v1:**
```json
{
  "id": 1,
  "username": "john"
}
````

**v2:**

```json
{
  "data": {
    "id": "1",
    "name": "john"
  }
}
```

## è¿ç§»æ­¥éª¤

1. æ›´æ–°æ‰€æœ‰ç«¯ç‚¹ URL
2. ä¿®æ”¹å“åº”è§£æé€»è¾‘
3. æ›´æ–°è®¤è¯æ–¹å¼
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

````

## äº¤äº’å¼æ–‡æ¡£

**Postman Collectionï¼š**
```json
{
  "info": {
    "name": "User API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Create User",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/users",
          "host": ["{{baseUrl}}"],
          "path": ["users"]
        }
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://api.example.com/v1"
    }
  ]
}
````

## å·¥å…·é…ç½®

**æ¨èå·¥å…·ï¼š**

```json
{
  "devDependencies": {
    "@redocly/cli": "^1.0.0",
    "swagger-ui-express": "^5.0.0",
    "docusaurus": "^3.0.0",
    "@stoplight/elements": "^7.0.0"
  }
}
```

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥ï¼Ÿ**
A: ä½¿ç”¨ä»£ç ç”Ÿæˆå·¥å…·ä»ä»£ç æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ï¼Œé›†æˆåˆ° CI/CD æµç¨‹ã€‚

**Q: å¦‚ä½•ç»„ç»‡å¤§å‹ API æ–‡æ¡£ï¼Ÿ**
A: æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„ï¼Œä½¿ç”¨æ ‡ç­¾å’Œç›®å½•ç»“æ„ï¼Œæä¾›æœç´¢åŠŸèƒ½ã€‚

## æ‰©å±•é˜…è¯»

- [OpenAPI Specification](https://swagger.io/specification/)
- [Redoc Documentation](https://redocly.com/docs/redoc/)
- [Docusaurus](https://docusaurus.io/)
- [API Design Guidelines](https://github.com/microsoft/api-guidelines)
