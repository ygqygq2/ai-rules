---
id: 1312
title: ç”Ÿäº§åº”æ€¥å“åº”ä¸“å®¶
description: æ•…éšœåº”æ€¥å¤„ç†æµç¨‹ã€å¿«é€Ÿå›æ»šã€æ ¹å› åˆ†æå’Œäº‹åæ€»ç»“
globs: ["**/*"]
priority: high
tags: [incident, emergency, production, troubleshooting, sre]
version: 1.0.0
author: Turbo AI Rules
lastUpdated: 2026-01-23
---

# ç”Ÿäº§åº”æ€¥å“åº”ä¸“å®¶

## ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½

- ğŸš¨ ç”Ÿäº§ç¯å¢ƒæ•…éšœå‘Šè­¦
- ğŸ“‰ æœåŠ¡æ€§èƒ½çªç„¶ä¸‹é™
- ğŸ”¥ ç”¨æˆ·åé¦ˆå¤§é‡é”™è¯¯
- ğŸ’¥ éƒ¨ç½²åå¼‚å¸¸
- ğŸ”„ éœ€è¦ç´§æ€¥å›æ»š

## åº”æ€¥å“åº”æµç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šå¿«é€Ÿå“åº”ï¼ˆ0-5åˆ†é’Ÿï¼‰

```
æ”¶åˆ°å‘Šè­¦
  â†“
1. ç¡®è®¤æ•…éšœ
   - æ£€æŸ¥ç›‘æ§é¢æ¿ç¡®è®¤å½±å“èŒƒå›´
   - éªŒè¯æ˜¯å¦è¯¯æŠ¥
   - ç¡®å®šä¼˜å…ˆçº§ï¼ˆP0-P4ï¼‰
  â†“
2. å¯åŠ¨åº”æ€¥
   - æ‹‰åº”æ€¥ç¾¤/é¢‘é“
   - æŒ‡å®šäº‹ä»¶æŒ‡æŒ¥å®˜ï¼ˆICï¼‰
   - é€šçŸ¥ç›¸å…³äººå‘˜
  â†“
3. æ­¢æŸä¼˜å…ˆ
   - èƒ½å›æ»šå…ˆå›æ»š
   - é™æµ/é™çº§
   - åˆ‡æ¢å¤‡ç”¨ç³»ç»Ÿ
```

**å…³é”®åŸåˆ™**ï¼šå…ˆæ­¢æŸï¼Œåæ’æŸ¥

---

### ç¬¬äºŒé˜¶æ®µï¼šæ•…éšœå®šä½ï¼ˆ5-30åˆ†é’Ÿï¼‰

#### å¿«é€Ÿè¯Šæ–­æ£€æŸ¥è¡¨

```bash
# 1. æœåŠ¡çŠ¶æ€
kubectl get pods -n production
systemctl status myapp
docker ps | grep myapp

# 2. é”™è¯¯æ—¥å¿—ï¼ˆæœ€è¿‘5åˆ†é’Ÿï¼‰
tail -n 1000 /var/log/app/error.log
journalctl -u myapp --since "5 minutes ago"
kubectl logs -n production deployment/myapp --tail=100

# 3. èµ„æºä½¿ç”¨
top -b -n 1 | head -20
free -h
df -h

# 4. ç½‘ç»œè¿æ¥
netstat -antp | grep ESTABLISHED | wc -l
ss -s

# 5. æ•°æ®åº“çŠ¶æ€
# MySQL
mysql -e "SHOW PROCESSLIST" | wc -l
mysql -e "SHOW ENGINE INNODB STATUS\G" | grep "LATEST DETECTED DEADLOCK"

# PostgreSQL
psql -c "SELECT count(*) FROM pg_stat_activity"
psql -c "SELECT * FROM pg_stat_activity WHERE state = 'active'"

# 6. å¤–éƒ¨ä¾èµ–
curl -I https://api.third-party.com/health
dig api.third-party.com
```

#### å¸¸è§é—®é¢˜æ¨¡å¼è¯†åˆ«

| ç—‡çŠ¶             | å¯èƒ½åŸå›                 | å¿«é€ŸéªŒè¯                |
| ---------------- | ----------------------- | ----------------------- |
| æ‰€æœ‰è¯·æ±‚ 5xx     | æœåŠ¡æŒ‚äº†/OOM            | `ps aux \| grep app`    |
| éƒ¨åˆ†è¯·æ±‚è¶…æ—¶     | æ•°æ®åº“æ…¢æŸ¥è¯¢/è¿æ¥æ± è€—å°½ | `SHOW PROCESSLIST`      |
| çªç„¶æµé‡æš´å¢     | è¥é”€æ´»åŠ¨/çˆ¬è™«/DDoS      | `tail -f access.log`    |
| ç‰¹å®šæ¥å£æŠ¥é”™     | ä»£ç  bug/é…ç½®é”™è¯¯       | `grep ERROR app.log`    |
| é—´æ­‡æ€§å¤±è´¥       | ç½‘ç»œæŠ–åŠ¨/ä¾èµ–æœåŠ¡ä¸ç¨³å®š | `ping`/æŸ¥çœ‹ç¬¬ä¸‰æ–¹çŠ¶æ€é¡µ |
| CPU/å†…å­˜æŒç»­å‡é«˜ | å†…å­˜æ³„æ¼/æ­»å¾ªç¯         | `jstack`/`pprof`        |

---

### ç¬¬ä¸‰é˜¶æ®µï¼šåº”æ€¥æ“ä½œ

#### 1. å¿«é€Ÿå›æ»š

**Kubernetes**

```bash
# æŸ¥çœ‹éƒ¨ç½²å†å²
kubectl rollout history deployment/myapp -n production

# å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
kubectl rollout undo deployment/myapp -n production

# å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
kubectl rollout undo deployment/myapp -n production --to-revision=3

# ç›‘æ§å›æ»šçŠ¶æ€
kubectl rollout status deployment/myapp -n production
```

**Docker Compose**

```bash
# ä½¿ç”¨ä¹‹å‰çš„é•œåƒç‰ˆæœ¬
docker-compose pull  # æ‹‰å–ä¸Šä¸ªç¨³å®šç‰ˆ
docker-compose up -d --no-deps --build myapp
```

**Git + è‡ªåŠ¨éƒ¨ç½²**

```bash
# å›æ»šä»£ç 
git revert <commit-hash>
git push origin main

# æˆ–å¼ºåˆ¶å›é€€ï¼ˆè°¨æ…ï¼‰
git reset --hard <last-good-commit>
git push --force origin main
```

**ä½¿ç”¨å›æ»šæ£€æŸ¥æ¸…å•**ï¼šå‚è§ `templates/rollback-checklist.md`

---

#### 2. ä¸´æ—¶ç¼“è§£æªæ–½

**é™æµ**

```bash
# Nginx é™æµ
# ç¼–è¾‘ nginx.conf
limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
limit_req zone=api burst=20;

nginx -t && nginx -s reload
```

**ç†”æ–­/é™çº§**

```python
# ä»£ç å±‚é¢ï¼ˆç¤ºä¾‹ï¼‰
if is_under_high_load():
    return {"status": "degraded", "message": "éæ ¸å¿ƒåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨"}
```

**åˆ‡æµé‡**

```bash
# ä¿®æ”¹ DNS/è´Ÿè½½å‡è¡¡å™¨
# å°†æµé‡åˆ‡åˆ°å¤‡ç”¨é›†ç¾¤
aws elbv2 modify-listener --listener-arn <arn> --default-actions <backup-target>
```

**æ‰©å®¹**

```bash
# Kubernetes å¿«é€Ÿæ‰©å®¹
kubectl scale deployment/myapp --replicas=10 -n production

# è‡ªåŠ¨æ‰©å®¹
kubectl autoscale deployment/myapp --min=3 --max=20 --cpu-percent=70
```

---

### ç¬¬å››é˜¶æ®µï¼šæ ¹å› åˆ†æï¼ˆæ•…éšœæ¢å¤åï¼‰

ä½¿ç”¨ **5 Whys æ–¹æ³•**ï¼š

```
é—®é¢˜ï¼šç”¨æˆ·ç™»å½•å¤±è´¥ç‡è¾¾åˆ° 80%

Why 1: ä¸ºä»€ä¹ˆç™»å½•å¤±è´¥ï¼Ÿ
â†’ æ•°æ®åº“è¿æ¥è¶…æ—¶

Why 2: ä¸ºä»€ä¹ˆæ•°æ®åº“è¿æ¥è¶…æ—¶ï¼Ÿ
â†’ è¿æ¥æ± è€—å°½ï¼ˆæœ€å¤§100ï¼Œå…¨éƒ¨å ç”¨ï¼‰

Why 3: ä¸ºä»€ä¹ˆè¿æ¥æ± è€—å°½ï¼Ÿ
â†’ æŸä¸ªæŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼ˆ30s+ï¼‰

Why 4: ä¸ºä»€ä¹ˆæŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Ÿ
â†’ ç¼ºå°‘ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æ1000ä¸‡æ¡æ•°æ®

Why 5: ä¸ºä»€ä¹ˆç¼ºå°‘ç´¢å¼•ï¼Ÿ
â†’ æ–°åŠŸèƒ½ä¸Šçº¿æ—¶æœªè¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼Œæœªreview SQL

æ ¹å› ï¼šç¼ºå°‘å‘å¸ƒå‰æ€§èƒ½æµ‹è¯•æµç¨‹
```

**ä½¿ç”¨æ ¹å› åˆ†ææ¨¡æ¿**ï¼šå‚è§ `templates/incident-report.md`

---

### ç¬¬äº”é˜¶æ®µï¼šäº‹åæ€»ç»“ï¼ˆ24å°æ—¶å†…ï¼‰

**Postmortem ä¼šè®®**ï¼š

- æ—¶é—´è½´å›é¡¾
- å½±å“è¯„ä¼°ï¼ˆç”¨æˆ·æ•°ã€æ—¶é•¿ã€æŸå¤±ï¼‰
- åšå¾—å¥½çš„åœ°æ–¹
- éœ€è¦æ”¹è¿›çš„åœ°æ–¹
- Action Itemsï¼ˆå…·ä½“è´£ä»»äºº+æˆªæ­¢æ—¥æœŸï¼‰

**ä½¿ç”¨äº‹åæ€»ç»“æ¨¡æ¿**ï¼šå‚è§ `templates/postmortem.md`

---

## æ•…éšœåˆ†çº§

| çº§åˆ« | å®šä¹‰                     | å“åº”æ—¶é—´  | ç¤ºä¾‹                 |
| ---- | ------------------------ | --------- | -------------------- |
| P0   | æ ¸å¿ƒä¸šåŠ¡å®Œå…¨ä¸å¯ç”¨       | ç«‹å³      | æ”¯ä»˜ç³»ç»Ÿå®•æœº         |
| P1   | æ ¸å¿ƒåŠŸèƒ½ä¸¥é‡å—æŸ         | 15åˆ†é’Ÿ    | 50%ç”¨æˆ·æ— æ³•ç™»å½•      |
| P2   | éƒ¨åˆ†åŠŸèƒ½ä¸å¯ç”¨           | 1å°æ—¶     | æ¶ˆæ¯æ¨é€å¤±è´¥         |
| P3   | ä½“éªŒä¸‹é™ï¼Œä½†å¯æ­£å¸¸ä½¿ç”¨   | 4å°æ—¶     | é¡µé¢åŠ è½½æ…¢           |
| P4   | å°èŒƒå›´å½±å“æˆ–éåŠŸèƒ½æ€§é—®é¢˜ | 1ä¸ªå·¥ä½œæ—¥ | æŸä¸ªè¾¹ç¼˜åŠŸèƒ½å¶å°”æŠ¥é”™ |

---

## æ²Ÿé€šæ¨¡æ¿

### åˆå§‹é€šçŸ¥ï¼ˆ5åˆ†é’Ÿå†…ï¼‰

```
ğŸš¨ æ•…éšœé€šçŸ¥ [P0]

æ—¶é—´ï¼š2026-01-23 14:32
å½±å“ï¼šç”¨æˆ·ç™»å½•åŠŸèƒ½ä¸å¯ç”¨
èŒƒå›´ï¼šå…¨éƒ¨ç”¨æˆ·
çŠ¶æ€ï¼šæ­£åœ¨å¤„ç†

å½“å‰è¡ŒåŠ¨ï¼š
- å·²å¯åŠ¨åº”æ€¥å“åº”
- æ­£åœ¨æ‰§è¡Œå›æ»š

é¢„è®¡æ¢å¤æ—¶é—´ï¼š15:00

è´Ÿè´£äººï¼š@å¼ ä¸‰
```

### è¿›åº¦æ›´æ–°ï¼ˆæ¯15-30åˆ†é’Ÿï¼‰

```
ğŸ“Š è¿›åº¦æ›´æ–° #2

æ—¶é—´ï¼š2026-01-23 14:50
çŠ¶æ€ï¼šéƒ¨åˆ†æ¢å¤

æœ€æ–°è¿›å±•ï¼š
âœ… å·²å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
âœ… 50%ç”¨æˆ·æ¢å¤æ­£å¸¸
ğŸ”„ æ­£åœ¨æ¸…ç†é”™è¯¯æ•°æ®

ä¸‹ä¸€æ­¥ï¼š
- 15:00 å®Œæˆå‰©ä½™ç”¨æˆ·æ¢å¤
- 15:15 ç¡®è®¤æ‰€æœ‰æœåŠ¡æ­£å¸¸

è´Ÿè´£äººï¼š@å¼ ä¸‰
```

### æ¢å¤é€šçŸ¥

```
âœ… æ•…éšœå·²æ¢å¤

æ—¶é—´ï¼š2026-01-23 15:10
æŒç»­æ—¶é•¿ï¼š38åˆ†é’Ÿ
å½±å“ç”¨æˆ·ï¼šçº¦10ä¸‡

è§£å†³æ–¹æ¡ˆï¼š
- å›æ»šåˆ° v2.3.1
- ä¿®å¤æ•°æ®åº“è¿æ¥é…ç½®
- æ¸…ç†å¼‚å¸¸æ•°æ®

åç»­è¡ŒåŠ¨ï¼š
- ä»Šæ—¥ 18:00 Postmortem ä¼šè®®
- 3æ—¥å†…å®Œæˆæ ¹å› åˆ†ææŠ¥å‘Š
- 1å‘¨å†…å®Œæˆé¢„é˜²æªæ–½

æ„Ÿè°¢å¤§å®¶çš„é…åˆï¼

è´Ÿè´£äººï¼š@å¼ ä¸‰
```

**ä½¿ç”¨æ²Ÿé€šæ¨¡æ¿**ï¼šå‚è§ `templates/communication-template.md`

---

## åº”æ€¥å·¥å…·ç®±

### ç›‘æ§å¿«é€ŸæŸ¥çœ‹

```bash
# Grafana ç›´è¾¾é“¾æ¥ï¼ˆå‡†å¤‡å¥½ä¹¦ç­¾ï¼‰
https://grafana.company.com/d/prod-overview
https://grafana.company.com/d/database-metrics
https://grafana.company.com/d/api-latency

# æ—¥å¿—æŸ¥è¯¢
https://kibana.company.com/app/discover
https://sentry.io/organizations/company/issues/

# æœåŠ¡çŠ¶æ€
kubectl get pods -A -o wide | grep -v Running
docker ps --format "{{.Names}}\t{{.Status}}"
```

### ä¸€é”®è¯Šæ–­è„šæœ¬

```bash
#!/bin/bash
# emergency-check.sh

echo "=== æ—¶é—´ ==="
date

echo -e "\n=== æœåŠ¡çŠ¶æ€ ==="
systemctl status myapp || docker ps | grep myapp

echo -e "\n=== æœ€è¿‘é”™è¯¯ ==="
tail -50 /var/log/app/error.log | grep ERROR

echo -e "\n=== èµ„æºä½¿ç”¨ ==="
echo "CPU: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}')"
echo "å†…å­˜: $(free -h | awk '/Mem:/ {print $3 "/" $2}')"
echo "ç£ç›˜: $(df -h / | awk 'NR==2 {print $5}')"

echo -e "\n=== æ´»è·ƒè¿æ¥ ==="
netstat -an | grep ESTABLISHED | wc -l

echo -e "\n=== æ•°æ®åº“è¿æ¥ ==="
mysql -e "SHOW PROCESSLIST" | wc -l
```

---

## é¢„é˜²æªæ–½æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰

- [ ] ä»£ç  Review é€šè¿‡
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•é€šè¿‡ï¼ˆè¦†ç›–ç‡ > 80%ï¼‰
- [ ] æ€§èƒ½æµ‹è¯•å®Œæˆ
- [ ] æ•°æ®åº“å˜æ›´å·² Review
- [ ] é…ç½®æ–‡ä»¶å·²æ£€æŸ¥
- [ ] å›æ»šæ–¹æ¡ˆå·²å‡†å¤‡
- [ ] ç›‘æ§å‘Šè­¦å·²é…ç½®
- [ ] é‡‘ä¸é›€/ç°åº¦å‘å¸ƒ

### ç³»ç»Ÿå±‚é¢

- [ ] è‡ªåŠ¨æ‰©ç¼©å®¹é…ç½®
- [ ] ç†”æ–­/é™æµæœºåˆ¶
- [ ] å¤šå¯ç”¨åŒºéƒ¨ç½²
- [ ] æ•°æ®åº“ä¸»ä»/è¯»å†™åˆ†ç¦»
- [ ] å®šæœŸå¤‡ä»½éªŒè¯
- [ ] æ··æ²Œå·¥ç¨‹æ¼”ç»ƒ

### å›¢é˜Ÿå‡†å¤‡

- [ ] On-call è½®å€¼è¡¨
- [ ] åº”æ€¥æµç¨‹æ–‡æ¡£
- [ ] æƒé™è®¿é—®å°±ç»ª
- [ ] æ²Ÿé€šæ¸ é“å»ºç«‹
- [ ] å®šæœŸåº”æ€¥æ¼”ç»ƒ

---

## å¸¸è§é”™è¯¯

âŒ **ä¸è¦åš**ï¼š

- æ…Œä¹±ä¸­ç›´æ¥ä¿®æ”¹ç”Ÿäº§æ•°æ®åº“
- æœªé€šçŸ¥å°±æ‰§è¡Œé«˜é£é™©æ“ä½œ
- åº”æ€¥æ—¶å°è¯•æ–°æ–¹æ¡ˆ
- è·³è¿‡éªŒè¯ç›´æ¥å‘å¸ƒ
- å¿˜è®°è®°å½•æ“ä½œæ­¥éª¤

âœ… **åº”è¯¥åš**ï¼š

- å…ˆæ­¢æŸï¼Œååˆ†æ
- ä¿æŒå†·é™ï¼ŒæŒ‰æµç¨‹æ“ä½œ
- æŒç»­æ²Ÿé€šï¼Œé€æ˜è¿›å±•
- è¯¦ç»†è®°å½•æ‰€æœ‰æ“ä½œ
- äº‹åæ€»ç»“ï¼Œé¿å…é‡å¤

---

## å­¦ä¹ èµ„æº

- [Google SRE Book](https://sre.google/books/)
- [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/)
- [Incident Response](https://response.pagerduty.com/)
- [Postmortem Templates](https://github.com/dastergon/postmortem-templates)
